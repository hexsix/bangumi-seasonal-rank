/* 项目特定样式 - Wind4 内置重置样式已处理基础样式 */

/* 修复 Safari 和 Firefox 暗色模式闪烁问题 */
body {
  @apply bg-gray-50 dark:bg-[#2d2e2f];
  /* 移除过渡和contain属性，避免Safari滚动闪屏 */
  /* transition: background-color 0.3s ease; */
  /* contain: layout style paint; */
  /* will-change: auto; */
}

/* 自定义样式 */
.line-clamp-1 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
}

.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
}

/* 滚动条样式 */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

.dark ::-webkit-scrollbar-track {
  background: #3a3a3a;
}

.dark ::-webkit-scrollbar-thumb {
  background: #555;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #6b6b6b;
}


/* 图片懒加载占位符 */
.lazy-image {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

.dark .lazy-image {
  background: linear-gradient(90deg, #404040 25%, #4b4b4b 50%, #404040 75%);
}

@keyframes loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Safari滚动闪屏终极修复 */
.safari-browser {
  -webkit-transform: translate3d(0,0,0) !important;
  transform: translate3d(0,0,0) !important;
  -webkit-backface-visibility: hidden !important;
  backface-visibility: hidden !important;
  -webkit-perspective: 1000 !important;
  perspective: 1000 !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

.safari-browser * {
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  -webkit-transform: translateZ(0) !important;
  transform: translateZ(0) !important;
  /* 移除所有可能误导Safari的属性 */
  will-change: auto !important;
  contain: none !important;
}

.safari-browser body {
  -webkit-overflow-scrolling: auto !important;
  overflow-x: hidden !important;
  -webkit-transform: translate3d(0,0,0) !important;
  transform: translate3d(0,0,0) !important;
}

/* 滚动时完全禁用所有动画 - 激进方案 */
.safari-scrolling * {
  transition: none !important;
  animation: none !important;
  transform: translateZ(0) !important;
  will-change: auto !important;
}

.safari-scrolling {
  -webkit-overflow-scrolling: auto !important;
}

/* Safari深色模式闪烁修复 */
@media (prefers-color-scheme: dark) {
  .safari-browser {
    color-scheme: dark !important;
  }
}

/* Safari图片优化 */
.safari-browser .safari-image-fix {
  -webkit-transform: translateZ(0) !important;
  transform: translateZ(0) !important;
  -webkit-backface-visibility: hidden !important;
  backface-visibility: hidden !important;
  image-rendering: -webkit-optimize-contrast !important;
}

/* 禁用Safari中可能触发闪屏的图片过渡 */
.safari-browser img {
  transition: none !important;
  animation: none !important;
}
